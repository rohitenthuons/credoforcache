(window.webpackJsonp=window.webpackJsonp||[]).push([[69],{416:function(t,e,r){t.exports=r.p+"img/error.2dc37a0.svg"},431:function(t,e,r){t.exports=r.p+"img/edit.8faff52.svg"},570:function(t,e,r){"use strict";r.r(e);r(25),r(32),r(44),r(33),r(56),r(64),r(111),r(50);var o={layout:"maindashboard",middleware:["auth","checkLoggedIn"],data:function(){return{firstname:null==this.$auth.user.first_name?"":this.$auth.user.first_name,lastname:null==this.$auth.user.last_name?null:this.$auth.user.last_name,dob:null==this.$auth.user.dob?null:new Date(this.$auth.user.dob.replace(/-/g,"/")),mobile:null==this.$auth.user.mobile?"":this.$auth.user.mobile,address:null==this.$auth.user.current_address?null:this.$auth.user.current_address,city:null==this.$auth.user.city?null:this.$auth.user.city,email:null==this.$auth.user.email?null:this.$auth.user.email,country:null==this.$auth.user.country?null:this.$auth.user.country,image:null==this.$auth.user.image_id?null:this.fetchImage(),url:null,firstname_error:"",lastname_error:"",dob_error:"",mobile_error:"",address_error:"",city_error:"",country_error:"",image_error:"",success:null,minbirthdate:0,maxbirthdate:0,rangeDate:"",details:[],count:0,successLeft:null,todayDate:(new Date).toISOString().split("T")[0],disabledDates:{to:new Date(2016,0,5),from:new Date(2016,0,26)},imgDataUrl:null,show:!1,params:{token:"123456798",name:"avatar"},headers:{smail:"*_~"},maxdate:null,maxMonth:null,minMonth:null,renderDate:0,assetUrl:"https://robob.credotree.com/"}},mounted:function(){var t=this;document.getElementsByClassName("afterLogin").length>0||(document.body.className+=" afterLogin ");var e=new Date;e.setFullYear(e.getFullYear()-14),this.maxdate=e;var r=new Date(this.todayDate);r.setFullYear(r.getFullYear()-80);var o=new Date(r);this.minbirthdate=o.getFullYear(),this.minMonth=o.getMonth();var l=new Date(this.todayDate);l.setFullYear(l.getFullYear()-14);var n=new Date(l);this.maxbirthdate=n.getFullYear(),this.maxMonth=n.getMonth(),this.rangeDate=this.minbirthdate+":"+this.maxbirthdate,this.$axios.get("https://robob.credotree.com/api/get-verification-details").then((function(e){t.details=e.data.details})).catch((function(t){}))},methods:{scroll:function(){$(document).on("click",'a[href^="#"]',(function(t){var e=$(this).attr("href"),r=$(e);if(0!==r.length){t.preventDefault();var o=r.offset().top;return $("body, html").animate({scrollTop:o}),!1}}))},onyearchange:function(t){},customFormatter:function(t){return r(71)(t).format("YYYY-MM-DD")},toggleShow:function(){this.show=!this.show},cropSuccess:function(t,e){var r=this;this.imgDataUrl=t,fetch(this.imgDataUrl).then((function(t){return t.blob()})).then((function(t){r.image=new File([t],"File name",{type:"image/png"})}))},cropUploadSuccess:function(t,e){},cropUploadFail:function(t,e){},closeRightSuccess:function(){this.success=null,this.successLeft=null},fetchImage:function(){var t=this;this.$axios.get("https://robob.credotree.com/api/getimage/"+this.$auth.user.image_id,{headers:{"content-type":"image/png",accept:"image/png"},responseType:"blob"}).then((function(e){var r=window.URL||window.webkitURL;t.url=r.createObjectURL(e.data)})).catch((function(t){}))},onFileChange:function(t){try{this.image=t.target.files[0],this.url=URL.createObjectURL(this.image)}catch(t){}},hide:function(){this.renderDate+=1},shows:function(){var t=this.maxdate.getMonth(),e=this.maxdate.getFullYear();setTimeout((function(){$(".p-datepicker-month").each((function(){$(this).children("option").show()})),e==$(".p-datepicker-year").val()&&$(".p-datepicker-month > option").each((function(){t<$(this).val()&&$(this).remove()}))}),100)},save:function(){var t=this,e=r(71);if(this.$store.commit("startLoading"),this.firstname_error=null,this.lastname_error=null,this.dob_error=null,this.mobile_error=null,this.address_error=null,this.success=null,this.city_error=null,this.country_error=null,this.image_error=null,this.count=0,null==this.firstname&&(this.firstname_error="Please select first name!",this.count+=1),null==this.lastname&&(this.lastname_error="Please select last name!",this.count+=1),10!=this.mobile.replace(/\s+/g,"").length&&(this.mobile_error="Please enter 10 digits",this.count+=1),null==this.address&&(this.address_error="Please fill this field!",this.count+=1),null==this.city&&(this.city_error="Please fill this field!",this.count+=1),null==this.dob&&(this.dob_error="Please enter date of birth!",this.count+=1),null==this.country&&(this.country_error="Please fill this field!",this.count+=1),0!=this.count)return this.$store.commit("stopLoading"),this.success=!1,void this.scroll();var o=e(this.dob).format("YYYY-MM-DD");this.successLeft=null;var data=new FormData;data.append("file",this.image),data.append("firstname",this.firstname),data.append("lastname",this.lastname),data.append("dob",o),data.append("mobile",this.mobile),data.append("address",this.address),data.append("city",this.city),data.append("country",this.country),this.$store.commit("startLoading"),this.$axios.post("https://robob.credotree.com/api/update-account-info",data,{headers:{"content-type":"multipart/form-data"}}).then((function(e){"success"==e.data.status&&t.$auth.fetchUser().then((function(e){t.$auth.fetchUser(),t.dob=new Date(t.$auth.user.dob),t.$auth.refreshTokens(),t.successLeft=!0,t.scroll(),t.$store.commit("stopLoading"),t.$store.commit("rightReload")})),e.data.response.file&&null!=e.data.response.file[0]&&(t.image_error=e.data.response.file[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading")),e.data.response.firstname&&null!=e.data.response.firstname[0]&&(t.firstname_error=e.data.response.firstname[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading")),e.data.response.lastname&&null!=e.data.response.lastname[0]&&(t.lastname_error=e.data.response.lastname[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading")),e.data.response.dob&&null!=e.data.response.dob[0]&&(t.dob_error=e.data.response.dob[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading")),e.data.response.mobile&&null!=e.data.response.mobile[0]&&(t.mobile_error=e.data.response.mobile[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading")),e.data.response.address&&null!=e.data.response.address[0]&&(t.address_error=e.data.response.address[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading")),e.data.response.city&&null!=e.data.response.city[0]&&(t.city_error=e.data.response.city[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading")),e.data.response.country&&null!=e.data.response.country[0]&&(t.country_error=e.data.response.country[0],t.success=!1,t.scroll(),t.$store.commit("stopLoading"))})).catch((function(t){}))}}},l=r(24),component=Object(l.a)(o,(function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"col-lg-7 col-md-6 mb-3 mb-md-0"},[o("client-only",[o("div",{staticClass:"profileBox"},[o("div",{staticClass:"title2",attrs:{id:"ach"}},[o("span",[t._v("Update Profile Info")])]),t._v(" "),1==t.successLeft?[o("div",{staticClass:"aleartBox success"},[o("span",{staticClass:"close",on:{click:t.closeRightSuccess}},[o("img",{attrs:{src:r(309),alt:""}})]),t._v(" "),o("div",{staticClass:"aleartImg"},[o("img",{attrs:{src:r(310),alt:""}})]),t._v(" "),o("div",{staticClass:"aleartText"},[o("span",[t._v("Success!,")]),t._v(" your account has been updated successfully\n          ")])])]:t._e(),t._v(" "),0==t.success?[o("div",{staticClass:"aleartBox error"},[o("span",{staticClass:"close",on:{click:t.closeRightSuccess}},[o("img",{attrs:{src:r(309),alt:""}})]),t._v(" "),o("div",{staticClass:"aleartImg"},[o("img",{attrs:{src:r(416),alt:""}})]),t._v(" "),o("div",{staticClass:"aleartText faild"},[o("span",[t._v("Sorry,")]),t._v(" it seems error/s, please fix it.\n              ")])])]:t._e(),t._v(" "),0==t.successLeft?[o("div",{staticClass:"aleartBox error"},[o("span",{staticClass:"close",on:{click:t.closeRightSuccess}},[o("img",{attrs:{src:r(309),alt:""}})]),t._v(" "),o("div",{staticClass:"aleartImg"},[o("img",{attrs:{src:r(416),alt:""}})]),t._v(" "),o("div",{staticClass:"aleartText faild"},[o("span",[t._v("Sorry,")]),t._v(" it seems your file is too big, try reducing\n            the file size and try again.\n          ")])])]:t._e(),t._v(" "),o("div",{staticClass:"userProfile"},[o("label",{staticClass:"profileImg"},[o("input",{on:{click:t.toggleShow}}),t._v(" "),null==t.imgDataUrl?[t.url?o("img",{staticClass:"image-style",attrs:{src:t.assetUrl+"profileimage/"+this.$auth.user.image_id}}):o("img",{class:[null==t.url?"animate":""],attrs:{alt:""}})]:[t.url?o("img",{staticClass:"image-style",attrs:{src:t.imgDataUrl}}):o("img",{class:[null==t.url?"animate":""],attrs:{alt:""}})],t._v(" "),o("span",{staticClass:"edit"},[o("img",{attrs:{src:r(431),alt:""}})])],2),t._v(" "),o("p",[t._v("(Use your real pic with minimum 300x300 size)")]),t._v(" "),t.image_error?o("p",{staticClass:"text-danger"},[t._v(t._s(t.image_error))]):t._e()]),t._v(" "),o("client-only",[o("my-upload",{attrs:{langType:"en",field:"img",noSquare:!0,width:300,height:300,params:t.params,headers:t.headers,"img-format":"png"},on:{"crop-success":t.cropSuccess,"crop-upload-success":t.cropUploadSuccess,"crop-upload-fail":t.cropUploadFail},model:{value:t.show,callback:function(e){t.show=e},expression:"show"}})],1),t._v(" "),o("div",{staticClass:"profileForm"},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group formBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.email,expression:"email"}],staticClass:"form-control",attrs:{type:"text",disabled:"false"},domProps:{value:t.email},on:{input:function(e){e.target.composing||(t.email=e.target.value)}}})])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group formBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.firstname,expression:"firstname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"First Name"},domProps:{value:t.firstname},on:{input:function(e){e.target.composing||(t.firstname=e.target.value)}}}),t._v(" "),t.firstname_error?o("div",{staticClass:"errorText"},[t._v("\n                "+t._s(t.firstname_error)+"\n              ")]):t._e()])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group formBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.lastname,expression:"lastname"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Last Name"},domProps:{value:t.lastname},on:{input:function(e){e.target.composing||(t.lastname=e.target.value)}}}),t._v(" "),t.lastname_error?o("div",{staticClass:"errorText"},[t._v("\n                "+t._s(t.lastname_error)+"\n              ")]):t._e()])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group formBox"},[o("client-only",[o("Datepicker",{key:t.renderDate,attrs:{dateFormat:"dd/mm/yy",maxDate:t.maxdate,yearRange:t.rangeDate,"selection-mode":"single",monthNavigator:!0,yearNavigator:!0,isDarkTheme:!1,hideOnDateTimeSelect:!0,placeholder:"Date of Birth",showIcon:!0},on:{"year-change":t.shows,"month-change":t.shows,show:t.shows,hide:t.hide},model:{value:t.dob,callback:function(e){t.dob=e},expression:"dob"}})],1),t._v(" "),t.dob_error?o("div",{staticClass:"errorText"},[t._v("\n                "+t._s(t.dob_error)+"\n              ")]):t._e()],1)]),t._v(" "),o("div",{staticClass:"col-md-6"},[t.details&&1==t.details.mobile_verification_status?[o("div",{staticClass:"form-control invite formBox"},[o("input",{staticStyle:{"font-size":"13px",color:"#495057"},attrs:{type:"text",readonly:""},domProps:{value:t.mobile}}),o("span",{staticClass:"inviteLink nounderline"},[o("NuxtLink",{attrs:{to:"/verify-profile"}},[o("a",{staticStyle:{"font-size":"13px",color:"green"},attrs:{href:"/verify-profile"}},[t._v("Update")])])],1)])]:[o("div",{staticClass:"form-group formBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.mobile,expression:"mobile"}],staticClass:"form-control",attrs:{type:"text",maxlength:"10",placeholder:"Mobile No"},domProps:{value:t.mobile},on:{input:function(e){e.target.composing||(t.mobile=e.target.value)}}}),t._v(" "),t.mobile_error?o("div",{staticClass:"errorText"},[t._v("\n                "+t._s(t.mobile_error)+"\n              ")]):t._e()])]],2),t._v(" "),o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"form-group formBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.address,expression:"address"}],staticClass:"form-control",attrs:{type:"text",placeholder:"Curent Address"},domProps:{value:t.address},on:{input:function(e){e.target.composing||(t.address=e.target.value)}}}),t._v(" "),t.address_error?o("div",{staticClass:"errorText"},[t._v("\n                "+t._s(t.address_error)+"\n              ")]):t._e()])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group formBox"},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.city,expression:"city"}],staticClass:"form-control",attrs:{type:"text",placeholder:"City"},domProps:{value:t.city},on:{input:function(e){e.target.composing||(t.city=e.target.value)}}}),t._v(" "),t.city_error?o("div",{staticClass:"errorText"},[t._v("\n                "+t._s(t.city_error)+"\n              ")]):t._e()])]),t._v(" "),o("div",{staticClass:"col-md-6"},[o("div",{staticClass:"form-group formBox"},[o("client-only",[o("country-select",{staticClass:"form-control",attrs:{country:t.country,autocomplete:!0,countryName:!0,topCountry:"US"},model:{value:t.country,callback:function(e){t.country=e},expression:"country"}})],1),t._v(" "),t.country_error?o("div",{staticClass:"errorText"},[t._v("\n                "+t._s(t.country_error)+"\n              ")]):t._e()],1)]),t._v(" "),o("div",{staticClass:"col-md-12"},[o("div",{staticClass:"formBtnBox"},[o("a",{staticClass:"btn",attrs:{href:"#ach"},on:{click:function(e){return e.preventDefault(),t.save.apply(null,arguments)}}},[t._v("Update")])])])])])],2)])],1)}),[],!1,null,null,null);e.default=component.exports}}]);